# Readme Studio — User Flow (v1)

> Goal: make it effortless to fetch a repo’s README (or create one), enhance it with widgets/AI, preview it beautifully, and commit via PR or direct push.

---

## Personas

- **Maker (Owner/Contributor):** wants to create or improve READMEs fast, across multiple repos.
- **Visitor (Viewer):** opens shared preview links, gives feedback, no write permissions.
- **Maintainer (Gatekeeper):** reviews PRs generated by the app.

---

## Happy Path (First-Time User)

1. **Landing → Value Prop**

   - CTA: *“Connect GitHub”* and *“Try demo without GitHub”.
   - Create a new Readme.md
   - Secondary: *Docs*, *Changelog*, *Examples Gallery*.

2. **Auth & Permissions**

   - Option A (recommended): **Install GitHub App** → select orgs/repos → scopes minimal (contents:read/write, issues:write optional).
   - Option B: no auth, only create/import, edit, copy and download.

3. **Repo Picker**

   - Search + recent repos.
   - Filters: *owner*, *private/public*, *has README/none*.
   - Empty state: “No access?” → *Install the App on more repos*.

4. **Fetch README / Detect Structure**

   - GET default branch, README path detection (README.md/README.rst/docs/index.md).
   - If 404/private w/o scope → *Access Fix Card* with “Install app / fix token”.

5. **Editor Workspace**\
   **Layout**: Left *Navigator* | Center *Markdown Editor* | Right *Preview*.

   - **Blocks Palette**: Header with badges, Summary/Pitch, Install, Usage, Examples, Screenshots, Roadmap, Contributing, License (MIT), Custom blocks.
   - **Smart Snippets**: Code tabs, JSON data viewers, collapsible sections, callouts.
   - **AI Assist**: “Improve clarity”, “Generate TOC w/ emojis”, “Rewrite for beginners/pros”, “Translate”, “Fix links”. #TODO
   - **Assets Helper**: drag & drop images → auto path & `<img>`/`![]()` insertion.
   - **Lint & Checks**: links, anchors, badge status, image existence.

6. **Preview Modes**

   - GitHub-style, Docs-style (narrow/wide), Dark/Light, Mobile/Desktop.
   - Anchor check: in-page TOC links validated.

7. **Save & Propose Changes**

   - **Commit Options**:
     - Direct commit (if rights) → branch: current.
     - New branch + **Create PR** (default) → PR title/body templated (diff summary, screenshots).
   - **Commit message assistant** (conventional commits).
   - Post-commit toast with **Open PR** link.

8. **Share**

   - **Preview Share Link** (read-only) for teammates/clients.
   - Export: Markdown file, ZIP with assets.

9. **Done & Next**

   - Suggest: “Scan another repo”, “Batch improve READMEs”, “Enable Auto-TOC on save”.

---

## Returning User Flow

1. **Dashboard**
   - Recent repos, drafts, PRs opened by app, “needs attention” (failed checks).
   - Quick Actions: *New README from template*, *Scan repo for broken anchors*, *Emoji-TOC refresh*.
2. **Open Draft or Repo** → resumes at **Editor Workspace** with last cursor position.

---

## Error / Edge Flows

- **CORS / Local file preview**: offer built-in preview server instructions; warn when opening via `file://`.
- **Private repo 404**: Access Fix Card with stepper to install app on that repo/org.
- **Permission denied on commit**: automatic fallback to *Fork → PR from fork*.
- **Image 404 on Pages**: asset path validator suggests `/static/...` or repo-relative paths.
- **Rate limit / token expired**: prompt to refresh token or switch to App.

---

## Key Screens (wireframe checklist)

- Landing
- Auth selection (App vs PAT)
- Repo picker
- Editor (with Blocks, AI, Lint panels)
- PR confirmation modal
- Dashboard
- Error/Empty states

---

## Navigation Map (condensed)

```
Landing
 └─ Connect GitHub → Auth (App/PAT)
     └─ Repo Picker → Editor
         ├─ Blocks/AI/Lint
         ├─ Preview Modes
         └─ Commit → PR/Direct
             └─ Share → Dashboard
```

---

## Data & Storage

- **Local (browser)**: drafts (autosave), editor state, preview settings, PAT (encrypted at rest), last repos.
- **Remote (GitHub)**: branches, PRs, README blobs, images under `/static/` or `/docs/`.

---

## AI Hooks (MVP)

- *Generate TOC with emojis* (toggle in settings).
- *Polish section*: tone rewrite + clarity + bullets.
- *Badge helper*: detect tech and propose shields.

---

## Instrumentation (events)

- `auth_connected`, `repo_selected`, `readme_fetched`, `ai_toc_used`, `lint_errors_shown`, `preview_toggle`, `commit_clicked`, `pr_created`, `share_link_copied`.

---

## NFRs & Constraints

- Works for private repos (GitHub App path is primary).
- Graceful degradation when offline (draft-only).
- Minimal scopes + clear permission copy.
- Accessible: keyboard nav, ARIA for editor/preview.

---

## Roadmap Hints

- Batch mode for multiple repos.
- Gallery of best-in-class READMEs to copy sections.
- PR check bot for anchors/images.
- Org-wide defaults (header, badges, license block).

---

## Open Questions (to validate)

- Should demo mode allow exporting without GitHub?
- Where to store shared read-only previews (ephemeral vs GitHub Pages)?
- Do we support MDX components in preview?
